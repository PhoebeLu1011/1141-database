<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>My To-Do List</title>
  <style>
    body { 
      font-family: "Segoe UI", Arial, sans-serif; 
      background:#f6f5f7; 
      color:#4a3f5c;
    }
    .container { 
      max-width: 700px; 
      margin: 50px auto; 
      background:#fff; 
      padding:20px; 
      border-radius:12px; 
      box-shadow:0 4px 10px rgba(140,122,169,0.15); 
    }
    h2 { 
      text-align:center; 
      color:#4a3f5c; 
      font-weight:600;
    }
    form { 
      display:flex; 
      gap:10px; 
      margin-bottom:20px; 
      justify-content: center; 
    }
    input, select, button { 
      padding:10px; 
      border-radius:6px; 
      border:1px solid #ccc; 
      font-size:14px;
    }
    button { 
      background:#8c7aa9; 
      color:white; 
      border:none; 
      cursor:pointer; 
      transition:0.3s;
    }
    button:hover { 
      background:#a892c6; 
    }
    table { 
      width:100%; 
      border-collapse: collapse; 
      margin-top:10px;
    }
    th, td { 
      padding:12px; 
      text-align:center; 
      border-bottom:1px solid #eee; 
    }
    th { 
      background:#f0eef3; 
      color:#4a3f5c; 
    }
    .done { 
      text-decoration: line-through; 
      color:gray; 
    }
    .actions a { 
      margin:0 5px; 
      text-decoration:none; 
      color:#8c7aa9; 
      font-weight:bold; 
    }
    .actions a:hover { 
      color:#a892c6; 
    }
    .flash { 
      color:#c75c5c; 
      text-align:center; 
      margin-bottom:10px; 
    }
    .categories {
      display:flex;
      justify-content:center;
      gap:12px;
      margin:20px 0;
    }
    .categories a {
      padding:8px 18px;
      border-radius:20px;
      text-decoration:none;
      border:1px solid #ddd;
      color:#4a3f5c;
      font-size:14px;
      transition:0.3s;
    }
    .categories a.active {
      background:#8c7aa9;
      color:#fff;
      border-color:#8c7aa9;
    }
    .categories a:hover {
      background:#a892c6;
      color:#fff;
      border-color:#a892c6;
    }

  </style>
</head>
<body>
  <div class="container">
    <h2>To-Do List</h2>


    <!-- flash Ë®äÊÅØ -->
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <div class="flash">
          {% for msg in messages %}
            <p>{{ msg }}</p>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <!-- Êñ∞Â¢û‰ªªÂãôË°®ÂñÆ -->
    <form action="{{ url_for('add') }}" method="post">
      <input type="text" name="task" placeholder="Ëº∏ÂÖ•‰ªªÂãô" required>
      <select name="category">
        <option value="work">work</option>
        <option value="school">school</option>
        <option value="other">other</option>
      </select>
      <button type="submit">Êñ∞Â¢û</button>
    </form>

    <div class="categories">
      <a href="{{ url_for('index') }}" class="{{ 'active' if not category }}">All</a>
      <a href="{{ url_for('index', category='work') }}" class="{{ 'active' if category=='work' }}">Work</a>
      <a href="{{ url_for('index', category='school') }}" class="{{ 'active' if category=='school' }}">School</a>
      <a href="{{ url_for('index', category='other') }}" class="{{ 'active' if category=='other' }}">Other</a>
    </div>

    <!-- ‰ªªÂãôÊ∏ÖÂñÆ -->
    <table>
      <tr>
        <th>‰ªªÂãô</th>
        <th>ÂàÜÈ°û</th>
        <th>ÁãÄÊÖã</th>
        <th>Êìç‰Ωú</th>
      </tr>
      {% for todo in todos %}
      <tr class="{{ 'done' if todo.status=='ÂÆåÊàê' }}">
        <td>{{ todo.task }}</td>
        <td>{{ todo.category }}</td>
        <td>{{ todo.status }}</td>
        <td class="actions">
          {% if todo.status != 'ÂÆåÊàê' %}
            <a href="{{ url_for('complete', todo_id=todo.id) }}">‚úî ÂÆåÊàê</a>
          {% endif %}
          <a href="{{ url_for('delete', todo_id=todo.id) }}">üóë Âà™Èô§</a>
        </td>
      </tr>
      {% endfor %}
    </table>
  </div>
</body>
</html>
